@model ERPElectrodata.Models.ObtenerDetalleCertificado_Result

@{
    ViewBag.Title = "DetalleCertificado";
    Layout = "~/Views/Shared/_LayoutArch.cshtml";
}

<div class="app-page-title">
    <div class="page-title-wrapper">
        <div class="page-title-heading">
            <div class="page-title-icon">
                <i class="fa fa-eye icon-gradient bg-sunny-morning"></i>
            </div>
            <div>
                Detalle de la Programación del Certificado
                <div class="page-title-subheading">
                    Detalle de la Certificación programada y su estado actual.
                </div>
            </div>
        </div>
        <div class="page-title-actions" style="text-align: right;">
            @if (@ViewBag.RRHH.ToString() == "1")
            {
            <a href="@Url.Action("ProgramacionCertificado", "Certificado")" class="btn btn-success" style="font-size: 16px;">
                Ir a Programación Certificados
            </a>
                <a href="@Url.Action("MisProgramaciones", "Certificado")" class="btn btn-danger" style="font-size: 16px;">
                    Ir a mis Programaciones
                </a>
            }
            else
            {
                <a href="@Url.Action("MisProgramaciones", "Certificado")" class="btn btn-danger" style="font-size: 16px;">
                    Ir a mis Programaciones
                </a>}
        </div>
    </div>
</div>

<div class="tab-content">
    <div class="row">
        <div class="col-md-12">
            <div class="main-card mb-3 card">
                <div class="card-body">
                    <div class="card-title">Datos del Certificado</div>

                    <hr />
                    <br />
                    <div class="form-row">
                        <div class="col-md-4">
                            <div class="position-relative form-group">
                                <label for="estado" class="dato-label">Estado:</label>
                                <div class="dato-valor" id="estadoCertificado">@Model.Estado</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="position-relative form-group">
                                <label for="fechaCreacion" class="dato-label">Fecha de Creación:</label>
                                <div class="dato-valor">@Model.FechaCreacion</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="position-relative form-group">
                                <label for="usuarioCreador" class="dato-label">Creado Por:</label>
                                <div class="dato-valor">@Model.Usuario_Creador</div>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-md-4">
                            <div class="position-relative form-group">
                                <label for="gerencia" class="dato-label">Gerencia:</label>
                                <div class="dato-valor">@Model.Gerencia</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="position-relative form-group">
                                <label for="area" class="dato-label">Área:</label>
                                <div class="dato-valor">@Model.Area</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="position-relative form-group">
                                <label for="cargo" class="dato-label">Cargo:</label>
                                <div class="dato-valor">@Model.CARGO</div>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="col-md-4">
                            <div class="position-relative form-group">
                                <label for="jefe" class="dato-label">Jefe:</label>
                                <div class="dato-valor">@Model.JEFE</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="position-relative form-group">
                                <label for="persona" class="dato-label">Colaborador:</label>
                                <div class="dato-valor">@Model.Persona</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="position-relative form-group">
                                <label for="certificado" class="dato-label">Certificado:</label>
                                <div class="dato-valor">@Model.Certificado</div>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-md-4">
                            <div class="position-relative form-group">
                                <label for="jefe" class="dato-label">Nombre del Examen:</label>
                                <div class="dato-valor">@Model.Examen</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="position-relative form-group">
                                <label for="persona" class="dato-label">Motivo de Certificación:</label>
                                <div class="dato-valor">@Model.Motivo</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="position-relative form-group">
                                <label for="marca" class="dato-label">Marca:</label>
                                <div class="dato-valor">@Model.Marca</div>
                            </div>
                        </div>

                    </div>

                    <div class="form-row">

                        <div class="col-md-4">
                            <div class="position-relative form-group">
                                <label for="fechaProgramada" class="dato-label">Fecha Programada:</label>
                                <div class="dato-valor">@Model.FechaProgramada </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="position-relative form-group">
                                <label for="monto" class="dato-label">Monto:</label>
                                <div class="dato-valor">@Model.Monto</div>
                            </div>
                        </div>
                        @if (!string.IsNullOrEmpty(Model.MotivoReprogramacion) && Model.NuevaFechaProgramada != null)
                        {
                            <div class="col-md-4">
                                <div class="position-relative form-group">
                                    <label for="fechaReprogramacion" class="dato-label">Fecha de Reprogramación:</label>
                                    <div class="dato-valor">@(Model.NuevaFechaProgramada.Value.ToString("MM/dd/yyyy"))</div>
                                </div>
                            </div>
                        }

                    </div>


                    <div class="form-row">

                        @if (!string.IsNullOrEmpty(Model.MotivoReprogramacion))
                        {
                            <div class="col-md-4">
                                <div class="position-relative form-group">
                                    <label for="motivoReprogramacion" class="dato-label">Motivo de Reprogramación:</label>
                                    <div class="dato-valor">@Model.MotivoReprogramacion</div>
                                </div>
                            </div>
                        }
                        @if (!string.IsNullOrEmpty(Model.UsuarioModificador))
                        {
                            <div class="col-md-4">
                                <div class="position-relative form-group">
                                    <label for="usuarioModificador" class="dato-label">Usuario Modificador:</label>
                                    <div class="dato-valor">@Model.UsuarioModificador</div>
                                </div>
                            </div>}
                        @if (Model.FechaModificacionReprogra != null)
                        {
                            <div class="col-md-4">
                                <div class="position-relative form-group">
                                    <label for="fechaModificacion" class="dato-label">Fecha de Modificación:</label>
                                    <div class="dato-valor">@Model.FechaModificacionReprogra </div>
                                </div>
                            </div>
                        }
                    </div>

                    <div class="form-row" id="estadoAprobado" style="display: none;">
                        <div class="col-md-4">
                            <div class="position-relative form-group">
                                <label for="fechaInicio" class="dato-label">Fecha de Inicio Vigencia:</label>
                                <div class="dato-valor">@Model.Fecha_Inicio_Certificado</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="position-relative form-group">
                                <label for="fechaFin" class="dato-label">Fecha de Fin Vigencia:</label>
                                <div class="dato-valor">@Model.Fecha_Fin_Certificado</div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="position-relative form-group">
                                <label for="certificado" class="dato-label">Adjunto:</label>
                                <div class="dato-valor">
                                    <a href="@Model.RutaCertificado" class="dato-valor" target="_blank">@Model.Extension</a>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var estado = $('#estadoCertificado').text().trim().toUpperCase();

        if (estado === "PENDIENTE") {
            $('#estadoPendiente').show();
        } else if (estado === "RENDIDO") {
            $('#estadoPendiente').show();
        } else if (estado === "APROBADO") {
            $('#estadoAprobado').show();
            $('#estadoPendiente').show();
        }

        $('.dato-valor').each(function () {
            if ($(this).text().trim() === '') {
                $(this).closest('.form-group').hide();
            }
        });
    });
</script>

<style>
    .dato-label {
        display: inline-block;
        font-weight: bold;
        width: 150px;
    }

    .dato-valor {
        display: inline-block;
    }
</style>
