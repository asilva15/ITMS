@{
    ViewBag.Title = "Editar";
    Layout = null;
}

<!--Declaración de Formulario-->
@using (Html.BeginForm("EditarCompetencia", "EvaluacionPersonal", FormMethod.Post, new { enctype = "multipart/form-data", id = "FormEditarCompetencia", target = "upload_target" }))
{
    <input type="hidden" name="IdCompetencia" id="IdCompetencia" value="@ViewBag.IdCompetencia" />
    @*<div class="alert alert-danger alert-dismissable" role="alert" id="alertaErrorComp" style="font-size:14px">
        <strong>¡Alerta!</strong> Completar la información solicitada
    </div>*@
    <div class="box">
        <form>
            <div class="box-body">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="FormPeriodoAct">Periodo</label>
                            <input type="text" class="form-control" id="FormPeriodoAct" name="FormPeriodoAct" value="@ViewBag.Periodo" disabled>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="FormCargo">Cargo</label><br />
                            <input type="text" class="form-control" id="FormCargo" name="FormCargo" value="@ViewBag.Cargo" disabled />
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="FormNombreEvaluacion">Nombre Evaluacion</label><br />
                            <input type="text" class="form-control" id="FormNombreEvaluacion" name="FormNombreEvaluacion" value="@ViewBag.NombreEvaluacion" disabled />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-8">
                        <div class="form-group">
                            <label for="FormNombreComp">Competencia</label><br />
                            <textarea class="form-control" id="FormNombreComp" name="FormNombreComp" rows="2" style="width:100%">@ViewBag.Competencia</textarea>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="FormIndicadorComp">Indicador</label>
                            <input type="text" class="form-control" id="FormIndicadorComp" name="FormIndicadorComp" value="@ViewBag.Indicador">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-8">
                        <div class="form-group">
                            <label for="FormDescripcionComp">Descripcion</label><br />
                            <textarea class="form-control" id="FormDescripcionComp" name="FormDescripcionComp" rows="2" style="width:100%">@ViewBag.Descripcion</textarea>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="FormPesoComp">Peso</label>
                            <input type="text" class="form-control" id="FormPesoComp" name="FormPesoComp" value="@ViewBag.Peso" min="1" max="100" step="1" maxlength="6" onkeypress="validacion(event);">
                        </div>
                    </div>
                </div>
                <div style="display:inline-block; float:right; padding:15px 15px 15px 5px;">
                    <button id="submit" class="btn btn-primary">Guardar</button>
                    <button id="cancelar" type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                    <iframe id="upload_target" name="upload_target" src="" style="width:0px;height:0px;border-width:0px;" class="display:none"></iframe>
                </div>
            </div>
        </form>

    </div>
}


<script type="text/javascript">
    $(document).ready(function () {
        $("#alertaErrorComp").hide();
    });

    function MensajeCompetencia(msg, msnErr) {

        if (msg == 'OK') {
            toastr.success('Información Actualizada');
            MostrarCompetencias();
            $("#cancelar").click();
            //$('#cancelar').click();
            //$('#SmallModalContent').modal('show');
            //$("#SmallModalTitle").empty();
            //$("#SmallModalTitle").text("Sistema de Gestión de Desempeño")
            //$("#SmallModalBody").empty();
            //$("#SmallModalBody").append("<div style='padding:10px 0 10px 0;'>Información Actualizada</div>");
            //$("#SmallModalFooter").empty();
            //$("#SmallModalFooter").append("<div style='float:right;'><button id='continues' class='k-button'>Continuar</button></div>");
            //$("#continues").focus();

            //var undo = $("#continues")
            //.bind("click", function () {
            //    $('#SmallModalContent').modal('hide');
            //    $('#ModalContent').modal('hide');
            //    MostrarCompetencias();
            //});

            //$("#closebtnmodal").click(function () {
            //    $('#SmallModalContent').modal('hide');
            //    MostrarCompetencias();
            //});
        }
        else if (msg == 'Mensaje') {
            toastr.warning('Completar la información solicitada','¡Alerta!');
            $("#alertaErrorComp").fadeIn()
            //setTimeout(function () {
            //    $("#alertaErrorComp").fadeOut();
            //}, 2000);
        }

        else {
            toastr.warning('No se Actualizaron los Datos.\n\n Contacte al Administrador.', 'Error al Guardar');
            $('#cancelar').click();
            //$('#SmallModalContent').modal('show');
            //$("#SmallModalTitle").empty();
            //$("#SmallModalTitle").text("Error al Guardar");
            //$("#SmallModalBody").empty();
            //$("#SmallModalBody").append("<div style='padding:10px 0 10px 0;'>" + "No se Actualizaron los Datos.\n\n Contacte al Administrador." + "</div>");
            //$("#SmallModalFooter").empty();
            //$("#SmallModalFooter").append("<div style='float:right;'>" +
            //                                  "<button id='continuee' class='k-button'>Continuar</button>" +
            //                           "</div>");
            //var undo = $("#continuee")
            //.bind("click", function () {
            //    $('#SmallModalContent').modal('hide');
            //});
        }
    }

</script>