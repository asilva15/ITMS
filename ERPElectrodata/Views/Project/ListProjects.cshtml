@*@model IEnumerable<ERPElectrodata.Models.PROJECT>*@

@{
    ViewBag.Title = "Projects List";
    Layout = null;
}

<div id="cont-project-planning">
    <div id="list-project" style="position: absolute;  width: 100%; ">
        <div style="width: 57%; float: left; padding-left: 0px; margin-left: 0px; position: relative;">
            <div class="titleForm">
                <div class="title">
                    <div style="float:left">Project List</div>
                    <div style="float:right; padding-right:10px; width:100px; text-align:right;">
                        <div style="display:inline-block;">
                            <img onclick="AddNewProject()" style="cursor:pointer;" title="Add New Project" src="/Content/Images/AddNew.png" />
                        </div>
                    </div>
                    <div style="clear:both;"></div>
                </div>
            </div>

                <div class="bodyForm">
                    <div class="inBodyForm">
                        <div class=" inbodyformrbl" style="min-height: 510px;  padding: 10px;">

                            <div id="divlistproj" style="border:0px solid red;"></div>
                            <div style="height:20px;">&nbsp;</div>
                            <div id="pagerProject"></div>

                        </div>
                    </div>
                </div>
            </div>


        <div style="width: 1%; min-width: 5px; height: 1px; float: left; position: relative;"></div>

        <div style="width:35%; float:left; padding-left:0px; margin-left:0px; position:relative;">
            <div class="titleForm">
                <div class="title" id="aaa">Gráfico</div>
            </div>

            <div class="bodyForm">
                <div class="inBodyForm">
                    <div class=" inbodyformrbl" style="min-height:510px; display:inline-block; padding:10px;">

                        &nbsp;

                    </div>
                </div>
            </div>
        </div>
       
    </div>
</div>


<script type="text/x-kendo-tmpl" id="template">
    <div class="Project${ID_PROJ}" style="padding: 5px 0px 5px 0px; box-shadow: 0 1px 0px 0 rgba(0, 0, 0, 0.25);  cursor: pointer;" onclick=LoadProjectPlanning(${ID_PROJ},${ID_PERS_ENTI}); onmouseover=onMouseOverProj(${ID_PROJ}); onmouseout=onMouseOutProj(${ID_PROJ});>
        <div class="Project${ID_PROJ}" style="background-color: white; /*border-radius: 3px;*/  width: 100%; margin: 0 auto; text-align:left;">

            <div style='width: 50px; display:inline-block; padding:5px 5px 5px 5px; vertical-align:top;'>
                <div>
                    <div style='width:100%;'>
                        <img class='photo' src='http://itms.electrodata.com.pe/Content/Fotos/${ID_PERS_ENTI}.jpg' />
                    </div>
                </div>
            </div>

            <div style='display: inline-block; width: 88%;'>
                <div style='display: table; float: left; text-align: left; width: 100%; color: black; font-size: 12px;'>
                    <div style='display: table-cell;'>
                        <span style="color: \\#3e4752;"><b>Create By: </b></span><span> ${NAME}&nbsp;&nbsp;</span>
                        <span style="color: \\#3e4752;"><b>Created: </b></span><span> ${CREATED}&nbsp;&nbsp;</span>
                    </div>
                </div>

                <div style='display: table; float: left; text-align: left;  width: 100%;'>
                    <div style='display: table-cell; color: black; font-size: 12px; text-align: justify; padding-top:5px;'><span style="color: \\#3e4752;"><b>Task Name: </b></span> ${NAM_PROJ}</div>
                </div>
                <div style='display: table; float: left; text-align: left; width: 100%;'>
                    <div style='display: table-cell; color: black; font-size: 12px; text-align: justify; padding-top: 5px;'><span style="color: \\#3e4752;"><b>Description: </b></span> ${DES_PROJ}</div>
                </div>

                <div style='display: table; float: left; text-align: left; width: 100%; padding-top: 5px;'>
                    <div style='display: table-cell; color: black; font-size:12px; '><span style="color: \\#3e4752;"><b>From: </b></span><span>${DATE_STAR} &nbsp;&nbsp;</span><span style="color: \\#3e4752;"><b>To: </b></span> <span>${DATE_END}</span></div>
                </div>
                <div style='clear:both;'></div>
            </div>
        </div>
    </div>
</script>


@*<script type="text/x-kendo-tmpl" id="template">

    <div class="Project${ID_PROJ}" style="padding: 10px 0px 0px 0px; cursor: pointer;" onclick=LoadProjectPlanning(${ID_PROJ},${ID_PERS_ENTI}); onmouseover=onMouseOverProj(${ID_PROJ}); onmouseout=onMouseOutProj(${ID_PROJ});>
        <div class="Project${ID_PROJ}" style="background-color: white; /*border-radius: 3px;*/ box-shadow: 0 1px 0px 0 rgba(0, 0, 0, 0.25); width: 100%; margin: 0 auto;">
            <div style='width: 50px; float:left;'><div style='width:100%;'><img class='photo' src='http://itms.electrodata.com.pe/Content/Fotos/${ID_PERS_ENTI}.jpg' /></div></div>

            <div style='width: 200px; float: left; text-align: left; padding: 5px 5px 5px 5px; '>
                <div style='color:\\#3e4752;font-weight:800;'>Created By</div>
                <div style='padding-top:3px; color:black;'>${NAME}</div>
            </div>

            <div style='width: 210px; float: left; text-align: left; padding: 5px 5px 5px 5px;'>
                <div style='color:\\#3e4752;font-weight:800;'>Project Name</div>
                <div style='padding-top: 3px; color: black;'>${NAM_PROJ}</div>
            </div>

            <div style='width: 70px; float: left; text-align: center; padding: 5px 5px 5px 5px;'>
                <div style='color:\\#3e4752;font-weight:800;'>Start Date</div>
                <div style='padding-top: 3px; color: black;'>${DATE_STAR}</div>
            </div>

            <div style='width: 70px; float: left; text-align: center; padding: 5px 5px 5px 5px;'>
                <div style='color:\\#3e4752;font-weight:800;'>End Date</div>
                <div style='padding-top: 3px; color: black;'>${DATE_END}</div>
            </div>

            <div style='width: 70px; float: left; text-align: center; padding: 5px 5px 5px 5px;'>
                <div style='color:\\#3e4752;font-weight:800;'>Created</div>
                <div style='padding-top: 3px; color: black;'>${CREATED}</div>
            </div>
            <div style='clear:both;'></div>
        </div>
    </div>
</script>*@

    <div class="modal fade" id="myModalProjectpmo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title" id="myModalLabel">Add New Project</h4>
                </div>
                <div class="modal-body">

                    <div id="idaddnewproject"></div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="k-button" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>   

    <script type="text/javascript">
        $(document).ready(function () {

            var dataSource = new kendo.data.DataSource({
                transport: {
                    read: {
                        url: "/Project/DataListProjects/?var=" + Math.random(),
                        type: "GET",
                        dataType: "json",
                        data: {
                            q: "#kendoui",
                            ran: Math.random()
                        }
                    }
                },
                autoSync: true,
                serverFiltering: true,
                filter: { field: "Status", operator: "eq", value: 1 },
                serverPaging: true,
                pageSize: 15,
                schema: {
                    data: "Data",
                    total: "Count"
                }
            });

            $("#pagerProject").kendoPager({
                dataSource: dataSource,
                pageSizes: [15, 30, 65],
                refresh: true
            });

            $("#divlistproj").kendoListView({
                dataSource: dataSource,
                template: kendo.template($("#template").html())
            });
        });

        function LoadProjectPlanning(idproj, idpers)
        {          
            var div_ancho = $("#list-project").width();

            $("#list-project").animate({ "left": "-=" + div_ancho + "" }, { duration: 1000 });
        
            setTimeout(function () {
                $("#cont-project-planning").empty();
                $("#cont-project-planning").load("/Project/ProjectPlanning/" + idproj + "/" + idpers);
              }, 1005); 
           }

        function onMouseOverProj(id) {

            $(".Project" + id).css("background-color", "#F5F5F5");
        }

        function onMouseOutProj(id) {
            $(".Project" + id).css("background-color", "#ffffff");            
        }

        function AddNewProject() {
            $('#myModalProjectpmo').modal('show');              
            $("#idaddnewproject").empty();
            $("#idaddnewproject").load("/Project/Create?var=" + Math.random());            
           
        }

        function PopUpProject(conf, msg) {

            if (conf == "OK") {

                $("#popupsaving").modal('show');
                $("#divsavingatta").empty();
                $("#divsavingatta").html('<span> ' + msg + '</span>');

                }
            else {

                $("#divmensajecreate").html('<span style="color:red; font-style:italic;">* ' + msg + '</span>');
            }
        }


        function FuncCancelCreateProj() {
            $('#myModalProjectpmo').modal('hide');
        }


    </script>
