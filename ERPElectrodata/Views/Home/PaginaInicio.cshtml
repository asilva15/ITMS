@{
    Layout = null;
}

<link href="~/Content/themes/AdminLTE.css" rel="stylesheet" />
<link href="~/Content/themes/ionicons/css/ionicons.css" rel="stylesheet" />

<link href="~/Content/themes/plugin/DataTables/datatables.css" rel="stylesheet" />
<link href="~/Content/themes/plugin/DataTables/Buttons-1.4.2/css/buttons.bootstrap.css" rel="stylesheet" />
<link href="~/Content/themes/plugin/DataTables/DataTables-1.10.16/css/dataTables.bootstrap4.css" rel="stylesheet" />
<link href="~/Content/ITMS/styles.css" rel="stylesheet" />

<script src="~/Content/themes/plugin/DataTables/datatables.js"></script>
<script src="~/Content/themes/plugin/DataTables/Buttons-1.4.2/js/buttons.bootstrap.js"></script>
<script src="~/Content/themes/plugin/DataTables/Buttons-1.4.2/js/dataTables.buttons.js"></script>
<script src="~/Content/themes/plugin/DataTables/DataTables-1.10.16/js/dataTables.bootstrap4.js"></script>

<body>
    <div class="content-header">
        <input type="hidden" id="IdIdioma" name="IdIdioma" value="@Session["IdIdioma"]" />
    </div>
    <div class="content">
        <div class="row">
            <div class="col-lg-2 col-xs-6">
                <div class="box-body">
                    <img src="~/Content/Fotos/@ViewBag.Foto" class="profile-user-img img-responsive img-circle" style="width:100%;" />
                </div>
                <div class="col-md-12 text-center">
                    @ViewBag.Nombre
                </div>
                <div class="small-box"></div>
                <div class="box">
                        <div class="col-md-12">
                            <div class="modal-body" style="width:100%">
                                <div class="progress" style="margin-bottom:0px;">
                                    <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: @ViewBag.Porcentaje%">
                                        Actividad_Semanal
                                    </div>
                                </div>
                            </div>
                        </div>
                    <div class="box-body">
                        <div class="text-center">
                            <button type="button" class="btn tbn-block btn-info disabled">NOVEDADES</button>
                        </div>
                        <div class="col-md-12 text-center">
                            <span>
                                Información relevante acerca de la empresa.
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-xs-6">
                <div class="small-box bg-red">
                    <div class="inner">
                        <h3>@ViewBag.Ticket</h3>
                    </div>
                    <div class="icon">
                        <i class="ion ion-document-text"></i>
                    </div>
                    <a href="/" class="small-box-footer">
                        Ticket Pendientes
                        <i class="fa fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div>
            <div class="col-lg-2 col-xs-6">
                <div class="small-box bg-yellow">
                    <div class="inner">
                        <h3>@ViewBag.Proyectos</h3>
                    </div>
                    <div class="icon">
                        <i class="ion ion-filing"></i>
                    </div>
                    <a href="/TicketOP" class="small-box-footer">
                        Ticket Proyectos
                        <i class="fa fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div>
            <div class="col-lg-2 col-xs-6">
                <div class="small-box bg-aqua">
                    <div class="inner">
                        <h3>@ViewBag.Cambios</h3>
                    </div>
                    <div class="icon">
                        <i class="ion ion-android-settings"></i>
                    </div>
                    <a href="/ChangeRequest" class="small-box-footer">
                        Cambios
                        <i class="fa fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div>
            <div class="col-lg-2 col-xs-6">
                <div class="small-box bg-green">
                    <div class="inner">
                        <h3>@ViewBag.Finanzas</h3>
                    </div>
                    <div class="icon">
                        <i class="ion ion-social-usd"></i>
                    </div>
                    <a href="/DeliverySustain" class="small-box-footer">
                        Finanzas
                        <i class="fa fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div>
            <div class="col-lg-2 col-xs-6">
                <div class="small-box bg-purple">
                    <div class="inner">
                        <h3>@ViewBag.Activos</h3>
                    </div>
                    <div class="icon">
                        <i class="ion ion-laptop"></i>
                    </div>
                    <div class="small-box-footer">
                        Activos Asignados
                        <i class="fa fa-arrow-circle-right"></i>
                    </div>
                </div>
            </div>
            <div class="col-lg-10 col-xs-12">
                <div class="box bg-gray-light">
                    <div class="nav-tabs-custom">
                        <ul class="nav nav-tabs">
                            <li class="active"><a id="tab1" href="javascript:void(0)" data-toggle="tab">Tickets</a></li>
                            <li><a id="tab2" href="javascript:void(0)" data-toggle="tab">Proyectos</a></li>
                            <li><a id="tab3" href="javascript:void(0)" data-toggle="tab">Problemas</a></li>
                            <li><a id="tab4" href="javascript:void(0)" data-toggle="tab">Mis Tickets</a></li>
                            <li class="pull-right"><a href="#" class="text-muted"><i class="fa fa-gear"></i></a></li>
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane active" id="tab_1">
                                <div class="box">
                                    <!-- /.box-header -->
                                    <div class="box-body">
                                        <table id="tablaTicket" class="table table-bordered table-striped" style="width:100%">
                                            <thead>
                                                <tr>
                                                    <th>Ticket</th>
                                                    <th>Cliente</th>
                                                    <th>Asignado</th>
                                                    <th>T.Trans</th>
                                                    <th>T.Falta</th>
                                                    <th>Prioridad</th>
                                                    <th>Categoria</th>
                                                    <th>Cuenta</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                            <tfoot>
                                                <tr>
                                                    <th>Ticket</th>
                                                    <th>Cliente</th>
                                                    <th>Asignado</th>
                                                    <th>T.Trans</th>
                                                    <th>T.Falta</th>
                                                    <th>Prioridad</th>
                                                    <th>Categoria</th>
                                                    <th>Cuenta</th>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                    T.Trans: Tiempo Transcurrido en <b>Dìas</b>; T.Falta: Tiempo faltante en <b>Horas</b> para llegar al SLA
                                    <!-- /.box-body -->
                                </div>
                            </div>
                            <!-- /.tab-pane -->
                            <div class="tab-pane" id="tab_2">
                                <div class="box">
                                    <!-- /.box-header -->
                                    <div class="box-body">
                                        <table id="tablaProyecto" class="table table-bordered table-striped" style="width:100%">
                                            <thead>
                                                <tr>
                                                    <th>Ticket</th>
                                                    <th>Cliente</th>
                                                    <th>Cliente Final</th>
                                                    <th>Asignado</th>
                                                    <th>T. Trans</th>
                                                    <th>Fecha Reg</th>
                                                    <th>Número OP</th>
                                                    <th>Titulo</th>
                                                    <th>Project Manager</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                            <tfoot>
                                                <tr>
                                                    <th>Ticket</th>
                                                    <th>Cliente</th>
                                                    <th>Cliente Final</th>
                                                    <th>Asignado</th>
                                                    <th>T. Trans</th>
                                                    <th>Fecha Reg</th>
                                                    <th>Número OP</th>
                                                    <th>Titulo</th>
                                                    <th>Project Manager</th>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                    T.Trans: Tiempo Transcurrido en <b>Dìas</b>
                                    <!-- /.box-body -->
                                </div>
                            </div>
                            <!-- /.tab-pane -->
                            <div class="tab-pane" id="tab_3">
                                <div class="box">
                                    <!-- /.box-header -->
                                    <div class="box-body">
                                        <table id="tablaProblema" class="table table-bordered table-striped" style="width:100%">
                                            <thead>
                                                <tr>
                                                    <th>Ticket</th>
                                                    <th>Cliente</th>
                                                    <th>Asignado</th>
                                                    <th>T.Trans</th>
                                                    <th>T.Falta</th>
                                                    <th>Prioridad</th>
                                                    <th>Categoria</th>
                                                    <th>Cuenta</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                            <tfoot>
                                                <tr>
                                                    <th>Ticket</th>
                                                    <th>Cliente</th>
                                                    <th>Asignado</th>
                                                    <th>T.Trans</th>
                                                    <th>T.Falta</th>
                                                    <th>Prioridad</th>
                                                    <th>Categoria</th>
                                                    <th>Cuenta</th>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                    <!-- /.box-body -->
                                </div>
                            </div>
                            <!-- /.tab-pane -->
                            <div class="tab-pane" id="tab_4">
                                <div class="box">
                                    <!-- /.box-header -->
                                    <div class="box-body">
                                        <table id="tablaMisTicket" class="table table-bordered table-striped" style="width:100%">
                                            <thead>
                                                <tr>
                                                    <th>Ticket</th>
                                                    <th>Cliente</th>
                                                    <th>Asignado</th>
                                                    <th>T.Trans</th>
                                                    <th>T.Falta</th>
                                                    <th>Prioridad</th>
                                                    <th>Categoria</th>
                                                    <th>Cuenta</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                            <tfoot>
                                                <tr>
                                                    <th>Ticket</th>
                                                    <th>Cliente</th>
                                                    <th>Asignado</th>
                                                    <th>T.Trans</th>
                                                    <th>T.Falta</th>
                                                    <th>Prioridad</th>
                                                    <th>Categoria</th>
                                                    <th>Cuenta</th>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                    T.Trans: Tiempo Transcurrido en <b>Dìas</b>; T.Falta: Tiempo faltante en <b>Horas</b> para llegar al SLA
                                    <!-- /.box-body -->
                                </div>
                            </div>
                            <!-- /.tab-panel -->
                        </div>
                        <!-- /.tab-content -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script type="text/javascript">

    $(document).ready(function () {
        $("#tab1").click(function () {
            $("#tab_1").addClass("active");
            $("#tab_2").removeClass("active");
            $("#tab_3").removeClass("active");
            $("#tab_4").removeClass("active");
        });
        $("#tab2").click(function () {
            $("#tab_1").removeClass("active");
            $("#tab_2").addClass("active");
            $("#tab_3").removeClass("active");
            $("#tab_4").removeClass("active");
        });
        $("#tab3").click(function () {
            $("#tab_1").removeClass("active");
            $("#tab_2").removeClass("active");
            $("#tab_3").addClass("active");
            $("#tab_4").removeClass("active");
        });
        $("#tab4").click(function () {
            $("#tab_1").removeClass("active");
            $("#tab_2").removeClass("active");
            $("#tab_3").removeClass("active");
            $("#tab_4").addClass("active");
        });

        $('#tablaTicket').DataTable({
            "order": [[4, "asc"]],
            responsive: true,
            dom: 'Bfrtip',
            ajax: "/Home/ListaTicket",
            columns: [
			    {
			        data: null,
			        render: function (data, type, row) {
			            return '<a href="/DetailsTicket/Index/' + data.IdTicket + '\" target="_blank">' + data.CODIGO + '</a>';
			        }
			    },
			    { data: "EMPRESA" },
			    {
			        data: "ASIGNADO"
			    },
			    { data: "TIEMPO_TRANSCURRIDO" },
                {
                    data: null,
                    render: function (data, type, row) {
                        return '<span class="label label-' + data.Etiqueta + '">' + data.TIEMPO_RESTANTE + '</span>';
                    }
                },
			    //{ data: "TIEMPO_RESTANTE" },
                {
                    data: null,
                    render: function (data, type, row) {
                        return '<span class="label label-' + data.Label + '">' + data.Prioridad + '</span>';
                    }
                },
                { data: "Categoria" },
                { data: "CUENTA" }
            ],
            buttons: [
                {
                    extend: 'collection',
                    text: 'Export',
                    buttons: [
                        'excel',
                        'csv',
                        'pdf'
                    ]
                }
            ]
        });

        $('#tablaProyecto').DataTable({
            "order": [[4, "asc"]],
            dom: 'Bfrtip',
            ajax: "/Home/ListaTicketProyecto",
            columns: [
			    {
			        data: null,
			        render: function (data, type, row) {
			            return '<a href="/DetailsTicket/Index/' + data.IdTicket + '\" target="_blank">' + data.Codigo + '</a>';
			        }
			    },
			    { data: "Empresa" },
                { data: "EmpresaFinal" },
			    { data: "Asignado" },
                {
                    data: null,
                    render: function (data, type, row) {
                        return '<span class="label label-' + data.Label + '">' + data.TiempoTranscurrido + '</span>';
                    }
                },
                { data: "FechaRegistro" },
                { data: "OP" },
                { data: "Titulo" },
                {
                    data: null,
                    render: function (data, type, row) {
                        return data.PM + ' ' + data.EstadoOP
                    }
                }
            ],
            buttons: [
                {
                    extend: 'collection',
                    text: 'Export',
                    buttons: [
                        'excel',
                        'csv',
                        'pdf'
                    ]
                }
            ]
        });

        $('#tablaProblema').DataTable({
            "order": [[4, "asc"]],
            dom: 'Bfrtip',
            ajax: "/Home/ListaTicketProblema",
            columns: [
			    {
			        data: null,
			        render: function (data, type, row) {
			            return '<a href="/DetailsTicket/Index/' + data.IdTicket + '\" target="_blank">' + data.CODIGO + '</a>';
			        }
			    },
			    { data: "EMPRESA" },
			    {
			        data: "ASIGNADO"
			    },
			    { data: "TIEMPO_TRANSCURRIDO" },
			    { data: "TIEMPO_RESTANTE" },
                {
                    data: null,
                    render: function (data, type, row) {
                        return '<span class="label label-' + data.Label + '">' + data.Prioridad + '</span>';
                    }
                },
                { data: "Categoria" },
                { data: "CUENTA" }
            ],
            buttons: [
                {
                    extend: 'collection',
                    text: 'Export',
                    buttons: [
                        'excel',
                        'csv',
                        'pdf'
                    ]
                }
            ]
        });

        $('#tablaMisTicket').DataTable({
            "order": [[4, "asc"]],
            responsive: true,
            dom: 'Bfrtip',
            ajax: "/Home/ListaMisTicket",
            columns: [
			    {
			        data: null,
			        render: function (data, type, row) {
			            return '<a href="/DetailsTicket/Index/' + data.IdTicket + '\" target="_blank">' + data.CODIGO + '</a>';
			        }
			    },
			    { data: "EMPRESA" },
			    {
			        data: "ASIGNADO"
			    },
			    { data: "TIEMPO_TRANSCURRIDO" },
			    {
			        data: null,
			        render: function (data, type, row) {
			            return '<span class="label label-' + data.Etiqueta + '">' + data.TIEMPO_RESTANTE + '</span>';
			        }
			    },
                {
                    data: null,
                    render: function (data, type, row) {
                        return '<span class="label label-' + data.Label + '">' + data.Prioridad + '</span>';
                    }
                },
                { data: "Categoria" },
                { data: "CUENTA" }
            ],
            buttons: [
                {
                    extend: 'collection',
                    text: 'Export',
                    buttons: [
                        'excel',
                        'csv',
                        'pdf'
                    ]
                }
            ]
        });

    });

</script>
