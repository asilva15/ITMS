@{
    ViewBag.Title = "Event";
    Layout = null;
}

<script src="http://demos.telerik.com/kendo-ui/content/shared/js/products.js"></script>

<style scoped>

#main  ul{
  margin: 0;
  padding: 0;
  list-style-type: none;
}

#main ul i{
  float:right;
  margin:0px;
  display:none;
  cursor: pointer;
}

#main ul li{
  margin:0px;
  padding:5px;
}

#main  ul li:hover {
  background-color:#F0F0F0;
}
#main  ul li:hover i{
  display:inline-block;

}

    .demo-section {
        /*width: 860px;*/
        margin: 5px 0px 0px 10px;
        border: 0;
        background: none;
    }

    #listView {
        padding: 0px;
        margin-bottom: -px;
        min-height: 450px;
    }

    .product {
        float: left;
        position: relative;
        width: 101px;
        height: 110px;
        margin: 0 5px;
        padding: 0;        
    }

        .product img {
            width: 100px;
            height: 100px;
        }

        .product h3 {
            margin: 0;
            padding: 3px 5px 0 0;
            max-width: 96px;
            overflow: hidden;
            line-height: 1.1em;
            font-size: .9em;
            font-weight: normal;
            text-transform: uppercase;
            color: #999;
        }

        .product p {
            visibility: hidden;
        }

        .product:hover p {
            visibility: visible;
            position: absolute;
            width: 100px;
            height: 100px;
            top: 0;
            margin: 0;
            padding: 0;
            line-height: 100px;
            vertical-align: middle;
            text-align: center;
            color: #fff;
            background-color: rgba(0,0,0,0.75);
            transition: background .2s linear, color .2s linear;
            -moz-transition: background .2s linear, color .2s linear;
            -webkit-transition: background .2s linear, color .2s linear;
            -o-transition: background .2s linear, color .2s linear;
            cursor:pointer;
        }

    .k-listview:after {
        content: ".";
        display: block;
        height: 0;
        clear: both;
        visibility: hidden;
    }
</style>


<script type="text/x-kendo-template" id="templatefotos">
    <div class="product">
        # if (Ext=='.jpg') { #
        <img src="/Adjuntos/Events/Thumbnail/#=NAM_ATTA_EVEN#_#=ID_ATTA_EVEN ##=EXT_ATTA_EVEN#" alt="#:NAM_ATTA_EVEN#" />
        #}else if(Ext=='.pdf') {#
        <img src="/Adjuntos/Events/Thumbnail/TumbPdf.jpg" alt="#:NAM_ATTA_EVEN#" />
        #}else if(Ext=='.docx') {#
        <img src="/Adjuntos/Events/Thumbnail/TumbWord.jpg" alt="#:NAM_ATTA_EVEN#" />
        #}else if(Ext=='.mov') {#
        <img src="/Adjuntos/Events/Thumbnail/TumbVideo.jpg" alt="#:NAM_ATTA_EVEN#" />
        #}else if(Ext=='.mp4') {#
        <img src="/Adjuntos/Events/Thumbnail/TumbVideo.jpg" alt="#:NAM_ATTA_EVEN#" />
        #}else {#
        <img src="/Adjuntos/Events/Thumbnail/TumbOther.jpg" alt="#:NAM_ATTA_EVEN#" />
        #}#
        <a style="text-decoration:none; color:white;" href="/Adjuntos/Events/#=NAM_ATTA_EVEN#_#=ID_ATTA_EVEN ##=EXT_ATTA_EVEN#" target="_blank">
            <p>
                #:kendo.toString(NAM_ATTA_EVEN)#
            </p>
        </a>
    </div>
</script>

<div style="float:left; width:60%;">
    <div class="titleForm">
        <div class="title">List Of Events</div>
    </div>
    <div style="width:100%;">
        <div id="main" style="padding:10px 0px 0px 0px;">
            <ul style="border-top:1px solid #e3e3e3;border-bottom:none;" id="divListEvents"></ul>
        </div>
        <div style="padding-top:10px;">
            <div id="pagerEvents"></div>
        </div>
    </div>
</div>


<div style="float:right; width:39%;">
    <div class="titleForm">
        <div class="title">Files in Event</div>
    </div>
    <div class="bodyForm">
        <div class="inBodyForm">
            <div class=" inbodyformrbl" style="min-height:525px; padding:15px;">

                <div id="Conteditevent"></div>
           
                <div id="contlistatta" style="display:none;">
                    <div class="demo-section">
                        <div id="listView" style="border:0px solid red;"></div>
                        <div style="height:5px;"></div>
                        <div id="pager" class="k-pager-wrap"></div>
                    </div>
                </div>


                </div>
        </div>
    </div>
</div>

<script type="text/x-kendo-tmpl" id="template">
    <li style="border-bottom:1px solid \\#e3e3e3">
        <div style="display:inline-block;width:100%;">
            <div style="width:35px;height:35px;background-color:\\#CB3F37;float:left;border-radius:50%;color:white;margin-top:4px;">
                <div style="display: table;height:35px;width:35px;text-align:center;">
                    <div style="display: table-cell;vertical-align: middle;width:35px;text-align:center;font-weight:500;font-size:14px;">
                        1
                    </div>
                </div>
            </div>
            <div style="float:left; margin-left:10px;width:40%;">
                <div style="color:\\#3e4752;font-size:13px;">Event</div>
                <div style="font-weight:600;font-size:14px;">#:NAM_EVEN#</div>
            </div>
            <div style="float:left; margin-left:10px;">
                <div style="color:\\#3e4752;font-size:13px;">Date</div>
                <div style="font-weight:600;font-size:14px;">#:DATE_STAR#</div>
            </div>

            @*<i class="glyphicon glyphicon-trash"></i>*@
            <div style="width:35px;height:35px;float:right;border-radius:50%;color:\\#3e4752;margin-top:4px;margin-right:20px;">
                <div style="display: table;height:35px;width:35px;text-align:center;">
                    <div style="display: table-cell;vertical-align: middle;width:35px;text-align:center;font-weight:500;font-size:14px;">
                        <i id="btnObj#:NAM_EVEN#" class="glyphicon glyphicon-folder-open" onclick="ListAttaEvent('#:ID_EVEN#')"></i>
                    </div>
                </div>
            </div>

            # if (@Convert.ToInt32(Session["RRHH_Admin"].ToString()) == 1) {#
            <div style="width:35px;height:35px;float:right;border-radius:50%;color:\\#3e4752;margin-top:4px;margin-right:10px;">
                <div style="display: table;height:35px;width:35px;text-align:center;">
                    <div style="display: table-cell;vertical-align: middle;width:35px;text-align:center;font-weight:500;font-size:14px;">
                        <i id="btnObj#:NAM_EVEN#" class="glyphicon glyphicon-cloud-upload" onclick="FuncEditEvent('#:ID_EVEN#')"></i>
                    </div>
                </div>
            </div>
            #}#
        </div>
    </li>
</script>

@*<script type="text/x-kendo-tmpl" id="template">

    <div class="Event${ID_EVEN}" style="padding: 5px 10px 5px 10px;" > 
        <div class="Event${ID_EVEN}" onmouseover=onMouseOverEvent(${ID_EVEN}); onmouseout=onMouseOutEvent(${ID_EVEN}); style="background-color: white; /*border-radius: 3px;*/ box-shadow: 0 1px 0px 0 rgba(0, 0, 0, 0.25); width: 100%; margin: 0 auto; ">
          


            <div style='width: 200px; float: left; text-align: left; padding: 5px 5px 5px 5px;'>
                <div style='color:\\#3e4752;font-weight:800;'>Event Name</div>
                <div style='padding-top: 3px; color: black;'>${NAM_EVEN}</div>
            </div>

            <div style='width: 70px; float: left; text-align: center; padding: 5px 5px 5px 5px;'>
                <div style='color:\\#3e4752;font-weight:800;'>Start Date</div>
                <div style='padding-top: 3px; color: black;'>${DATE_STAR}</div>
            </div>

            <div style='width: 70px; float: left; text-align: center; padding: 5px 5px 5px 5px;'>
                <div style='color:\\#3e4752;font-weight:800;'>End Date</div>
                <div style='padding-top: 3px; color: black;'>${DATE_END}</div>
            </div>

            <div id="buttonevent${ID_EVEN}" style='width: 70px; float: right; text-align: center; padding: 15px 5px 5px 5px; display:none;'>
                <div style='color: \\#3e4752; font-weight: 800; text-align: center;'>
                    <img onclick=FuncEditEvent(${ID_EVEN}); style="display:inline-block; cursor:pointer; padding:0px 0px 0px 0px;" title="Edit" src="/Content/Images/editbene.png" />
                    <img onclick=ListAttaEvent(${ID_EVEN}); style="display:inline-block; cursor:pointer; padding:0px 0px 0px 0px;" title="Attachs" src="/Content/Images/documentsbene.png" />
                </div>
            </div>

            <div style='clear:both;'></div>
        </div>
    </div>    
</script>*@




    <script type="text/javascript">
        $(document).ready(function () {

            var dataSource = new kendo.data.DataSource({
                transport: {
                    read: {
                        url: "/Event/DataListEvent/?var=" + Math.random(),
                        type: "GET",
                        dataType: "json",
                        data: {
                            q: "#kendoui",
                            ran: Math.random()
                        }
                    }
                },
                autoSync: true,
                serverFiltering: true,
                filter: { field: "ID_EVEN", operator: "eq", value: 1 },
                serverPaging: true,
                pageSize: 15,
                schema: {
                    data: "Data",
                    total: "Count"
                }
            });

            $("#pagerEvents").kendoPager({
                dataSource: dataSource,
                pageSizes: [15, 30, 65],
                refresh: true
            });

            $("#divListEvents").kendoListView({
                dataSource: dataSource,
                template: kendo.template($("#template").html())
            });

                
        });


        $("#filesevent").kendoUpload({
            localization: {
                select: "@ResourceLanguaje.Resource.Attach"
            }
        });

        function ListAttaEvent(id) {           

            $("#contlistatta").css("display", "inline");
            $("#Contdiveditevent").css("display", "none");
            $("#divlistAtta").empty();

            if ($("#listView").data("kendoListView")) {
                $("#pager").data("kendoPager").destroy();
                $("#listView").data("kendoListView").destroy();
            }

           var dataS=new kendo.data.DataSource({
                transport: {
                    read: {
                        url: "/Event/DataListAttaEvent/"+id+"?var=" + Math.random(),
                        type: "GET",
                        dataType: "json",
                        data: {
                            q: "#kendoui",
                            ran: Math.random()
                        }
                    }
                },
                autoSync: true,
                serverFiltering: true,
                filter: { field: "ID_EVEN", operator: "eq", value: 1 },
                serverPaging: true,
                pageSize: 16,
                schema: {
                    data: "Data",
                    total: "Count"
                }
           });

           var dataSource = new kendo.data.DataSource({
               data: dataS,
               pageSize: 16
           });

           $("#pager").kendoPager({
               dataSource: dataS,
               buttonCount: 3
           });

           $("#listView").kendoListView({
               dataSource: dataS,
               template: kendo.template($("#templatefotos").html())
           });
        }

        function FuncEditEvent(id) {
            $("#contlistatta").css("display", "none");
            $("#Conteditevent").empty();
            $("#Conteditevent").load("/Event/ViewNewAttach/" + id + "?var=" + Math.random());

        }

    </script>

           